<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cambios</title>
    <link rel="stylesheet" href="Estilos/styles.css">
    <link rel="icon" href="Imagenes/icono.png">

    <!-- Carga el n√∫cleo de Firebase JS SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <!-- Agrega el manejo de autenticaci√≥n. -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js">
    </script>
    <script src="js/init.js"></script>
</head>

<body>

    <div class="navbar">
        <div class="navbar-left">
            <button type="button" onclick="terminaSesi√≥n()">Cerrar Sesi√≥n</button>
            <fieldset>
                <legend>Email</legend>
                <output id="email"><progress max="100">Cargando‚Ä¶</progress></output>
            </fieldset>
            <br>
            <fieldset>
                <legend>Nombre</legend>
                <output id="nombre"></output>
            </fieldset>
            <br>
        </div>
        <figure><img src="avatar" id="avatar" alt="avatar" class="navbar-profile-image"></figure>
    </div>

    <script async defer crossorigin="anonymous"
        src="https://connect.facebook.net/es_ES/sdk.js#xfbml=1&version=v18.0&appId=404253428797280"
        nonce="qgXHd83w"></script>

    <section class="profile-section">
        <h2 class="font-changeable">Cambia la foto de perfil</h2>
        <img src="" alt="avatar" class="profile-image" id="profile-preview">
        <p class="font-changeable">Selecciona una imagen:</p>
        <select id="image-select">
            <option value="perfil2.png">Imagen 2</option>
            <option value="Perfil3.png">Imagen 3</option>
            <option value="Perfil4.png">Imagen 4</option>
            <option value="Perfil5.png">Imagen 5</option>
            <option value="Perfil6.png">Imagen 6</option>
            <option value="Perfil7.png">Imagen 7</option>
            <option value="Perfil8.png">Imagen 8</option>
            <option value="Perfil9.png">Imagen 9</option>
            <option value="Perfil10.png">Imagen 10</option>
            <option value="perfil11.png">Imagen 11</option>
            <option value="perfil12.png">Imagen 12</option>
            <option value="Perfil13.png">Imagen 13</option>
            <option value="Perfil14.png">Imagen 14</option>
            <option value="Perfil15.png">Imagen 15</option>
            <option value="Perfil16.png">Imagen 16</option>
            <option value="Perfil17.png">Imagen 17</option>
            <option value="Perfil18.png">Imagen 18</option>
            <option value="Perfil19.png">Imagen 19</option>
            <option value="Perfil20.png">Imagen 20</option>
            <option value="perfil21.png">Imagen 21</option>
            <option value="perfil22.png">Imagen 22</option>
            <option value="Perfil23.png">Imagen 23</option>
            <option value="Perfil24.png">Imagen 24</option>
            <option value="Perfil25.png">Imagen 25</option>
            <option value="Perfil26.png">Imagen 26</option>
            <option value="Perfil27.png">Imagen 27</option>
            <option value="Perfil28.png">Imagen 28</option>
            <option value="Perfil29.png">Imagen 29</option>
            <option value="Perfil30.png">Imagen 30</option>
            <option value="perfil31.png">Imagen 31</option>
            <option value="perfil32.png">Imagen 32</option>
            <option value="Perfil33.png">Imagen 33</option>
            <option value="Perfil34.png">Imagen 34</option>
            <option value="Perfil35.png">Imagen 35</option>
            <option value="Perfil36.png">Imagen 36</option>
            <option value="Perfil37.png">Imagen 37</option>
            <option value="Perfil38.png">Imagen 38</option>
            <option value="Perfil39.png">Imagen 39</option>
            <option value="Perfil40.png">Imagen 40</option>
            <option value="perfil41.png">Imagen 41</option>
            <option value="perfil42.png">Imagen 42</option>
            <option value="Perfil43.png">Imagen 43</option>
            <option value="Perfil44.png">Imagen 44</option>
        </select>
        <button id="cambiar-foto-button">Cambiar Foto</button>
        <p class="font-changeable">¬øNo te gust√≥ ninguna foto? Selecciona una de tu galer√≠a üòé</p>
        <br>
        <input type="file" id="gallery-image" accept="image/*">
        <br>
        <br>
        <br>
        <button id="reset-button">Restablecer Cambios</button>
        <br>
        <br>
    </section>

    <main class="color-change-section">
        <h2 class="font-changeable">Cambia los colores del encabezado y pie de p√°gina</h2>
        <br>
        <br>
        <p class="font-changeable">Selecciona un color:</p>
        <br>
        <input type="color" id="colorPicker" class="color-picker">
        <br>
        <br>
        <br>
        <br>
        <button id="applyColor" class="apply-button">Aplicar Cambios</button>
        <button id="resetColor" class="reset-button">Restablecer Cambios</button>
    </main>

    <section class="font-change-section">
        <h2 class="font-changeable">Cambia la tipograf√≠a</h2>
        <p class="font-changeable" class="font-changeable">Selecciona una fuente:</p>
        <br>
        <select id="fontSelect" class="font-select">
            <option class="font-changeable" value="Arial, sans-serif">Arial</option>
            <option class="font-changeable" value="Georgia, serif">Georgia</option>
            <option class="font-changeable" value="Verdana, sans-serif">Verdana</option>
            <option class="font-changeable" value="Times New Roman, serif">Times New Roman</option>
            <option value="'KING ARTHUR', sans-serif">KING ARTHUR</option>
            <option value="'Minecraft', sans-serif">Minecraft</option>
        </select>
        <br>
        <button id="applyFont" class="apply-button">Aplicar Cambios</button>
        <button id="resetFont" class="reset-button">Restablecer Cambios</button>
    </section>


    <section class="background-section">
        <h2 class="font-changeable">Cambia el fondo</h2>
        <p class="font-changeable">Selecciona un color:</p>
        <input type="color" id="backgroundColorPicker" class="color-picker">
        <br>
        <p class="font-changeable">Selecciona una imagen de fondo:</p>
        <input type="file" id="background-image" accept="image/*">
        <br>
        <br>
        <button id="applyBackground" class="apply-button">Aplicar Cambios</button>
        <button id="resetBackground" class="reset-button">Restablecer Cambios</button>
    </section>

    <section class="image-gallery">
        <h2 class="font-changeable">Galer√≠a de Im√°genes</h2>
        <p class="font-changeable">Sube tus im√°genes y personaliza la galer√≠a:</p>
        <input type="file" id="image-upload" accept="image/*">
        <br>
        <br>
        <button id="delete-all-button" class="custom-button delete-button">Eliminar Galer√≠a</button>
        <div class="image-grid">
            <!-- Im√°genes se mostrar√°n aqu√≠ -->
        </div>
    </section>

    <div class="section">
        <h2>Escribe en el coraz√≥n</h2>
        <div class="heart-container">
            <div class="heart"></div>
            <div class="heart-text">Tu texto aqu√≠</div>
        </div>
        <input type="text" id="text-input" placeholder="Escribe tu mensaje" onchange="updateHeartText()">
        <br>
        <p>escribe lo que quieras üòò</p>
    </div>



    <footer class="font-changeable">
        Copyright &copy; 2023 Saul Yair -- Mazacuata‰π°.
        <div class="social-icons">
            <a href="https://instagram.com/_mazacuata?utm_source=qr&igshid=NGExMmI2YTkyZg%3D%3D"><img
                    src="Imagenes/igLogo.png" alt="Instagram"></a>
            <a href="https://github.com/mazacuata1"><img src="Imagenes/githubLogo.png" alt="GitHub"></a>
            <a href="https://www.facebook.com/sauly.faick"><img src="Imagenes/fbLogo.png" alt="Facebook"></a>
            <a href="https://replit.com/@yankee1234511"><img src="Imagenes/replitLogo.png" alt="Replit"></a>
        </div>
    </footer>
</body>



<script>
    document.addEventListener("DOMContentLoaded", function () {
        const imageSelect = document.getElementById("image-select");
        const cambiarFotoButton = document.getElementById("cambiar-foto-button");
        const resetButton = document.getElementById("reset-button");
        const profileImage = document.getElementById("profile-preview");
        const navbarProfileImages = document.querySelectorAll(".navbar-profile-image");
        const galleryImageInput = document.getElementById("gallery-image");

        // Funci√≥n para restablecer la imagen a la inicial
        const resetImage = () => {
            profileImage.src = "avatar";
            navbarProfileImages.forEach(image => {
                image.src = "avatar";
            });
            imageSelect.selectedIndex = 0; // Reiniciar el select a la primera opci√≥n
        };

        cambiarFotoButton.addEventListener("click", function () {
            const selectedImage = imageSelect.value;
            profileImage.src = `Perfiles/${selectedImage}`;

            // Cambiar tambi√©n la imagen en la barra de navegaci√≥n
            navbarProfileImages.forEach(image => {
                image.src = `Perfiles/${selectedImage}`;
            });
        });

        resetButton.addEventListener("click", resetImage);

        // Actualizar la imagen de perfil en la secci√≥n al seleccionar una opci√≥n
        imageSelect.addEventListener("change", function () {
            const selectedImage = imageSelect.value;
            profileImage.src = `Perfiles/${selectedImage}`;
        });

        galleryImageInput.addEventListener("change", function (event) {
            const selectedImage = event.target.files[0];

            if (selectedImage) {
                profileImage.src = URL.createObjectURL(selectedImage);
                navbarProfileImages.forEach(image => {
                    image.src = URL.createObjectURL(selectedImage);
                });
            }
        });
    });
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const colorPicker = document.getElementById("colorPicker");
        const applyButton = document.getElementById("applyColor");
        const resetButton = document.getElementById("resetColor");
        const header = document.querySelector(".navbar");
        const footer = document.querySelector("footer");

        let originalHeaderColor = getComputedStyle(header).backgroundColor;
        let originalFooterColor = getComputedStyle(footer).backgroundColor;

        applyButton.addEventListener("click", function () {
            const selectedColor = colorPicker.value;
            header.style.backgroundColor = selectedColor;
            footer.style.backgroundColor = selectedColor;
        });

        resetButton.addEventListener("click", function () {
            header.style.backgroundColor = originalHeaderColor;
            footer.style.backgroundColor = originalFooterColor;
        });
    });
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const fontSelect = document.getElementById("fontSelect");
        const applyFontButton = document.getElementById("applyFont");
        const resetFontButton = document.getElementById("resetFont");
        const elementsToChangeFont = document.querySelectorAll(".font-changeable");

        let originalFont = getComputedStyle(elementsToChangeFont[0]).fontFamily;

        applyFontButton.addEventListener("click", function () {
            const selectedFont = fontSelect.value;
            elementsToChangeFont.forEach(element => {
                element.style.fontFamily = selectedFont;
            });
        });

        resetFontButton.addEventListener("click", function () {
            elementsToChangeFont.forEach(element => {
                element.style.fontFamily = originalFont;
            });
        });
    });
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const backgroundColorPicker = document.getElementById("backgroundColorPicker");
        const backgroundImageInput = document.getElementById("background-image");
        const applyBackgroundButton = document.getElementById("applyBackground");
        const resetBackgroundButton = document.getElementById("resetBackground");
        const body = document.body;

        let originalBackgroundColor = getComputedStyle(body).backgroundColor;

        applyBackgroundButton.addEventListener("click", function () {
            const selectedBackgroundColor = backgroundColorPicker.value;
            body.style.backgroundColor = selectedBackgroundColor;
        });

        resetBackgroundButton.addEventListener("click", function () {
            body.style.backgroundColor = originalBackgroundColor;
        });

        backgroundImageInput.addEventListener("change", function (event) {
            const selectedImage = event.target.files[0];

            if (selectedImage) {
                body.style.backgroundImage = `url('${URL.createObjectURL(selectedImage)}')`;
            }
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const imageUpload = document.getElementById("image-upload");
        const deleteAllButton = document.getElementById("delete-all-button");
        const imageGrid = document.querySelector(".image-grid");
        let pressTimer;

        // Funci√≥n para agregar una imagen a la galer√≠a
        const addImageToGallery = (imageSrc) => {
            const imgElement = document.createElement("img");
            imgElement.src = imageSrc;
            imgElement.alt = "Imagen de la galer√≠a";
            imgElement.className = "gallery-image";
            imageGrid.appendChild(imgElement);

            // Manejar clic en la imagen para mostrarla completa
            imgElement.addEventListener("click", function () {
                imgElement.classList.toggle("full-image");
            });

            // Manejar mantener presionada la imagen para eliminarla
            imgElement.addEventListener("mousedown", function () {
                pressTimer = setTimeout(function () {
                    imgElement.remove();
                }, 1000); // Esperar 1000 ms
            });

            imgElement.addEventListener("mouseup", function () {
                clearTimeout(pressTimer);
            });
        };

        // Manejar la carga de im√°genes desde el bot√≥n de carga
        imageUpload.addEventListener("change", function (event) {
            const selectedImage = event.target.files[0];
            if (selectedImage) {
                const imageURL = URL.createObjectURL(selectedImage);
                addImageToGallery(imageURL);
            }
        });

        // Manejar la eliminaci√≥n de todas las im√°genes
        deleteAllButton.addEventListener("click", function () {
            imageGrid.innerHTML = ""; // Vaciar la galer√≠a
        });
    });

</script>

<script>
    const heartText = document.querySelector(".heart-text");
    const colorButton = document.getElementById("color-button");
    const colorSelector = document.getElementById("color-selector");
    const resetButton = document.getElementById("reset-button");
    const heart = document.querySelector(".heart"); // Agregado

    document.addEventListener("click", () => {
        const color = colorSelector.value;
        heart.style.backgroundColor = color; // Modificado
    });

    resetButton.addEventListener("click", () => {
        heart.style.backgroundColor = "red"; // Modificado
    });

    function updateHeartText() {
        const textInput = document.getElementById("text-input");
        heartText.textContent = textInput.value;
    }
</script>

<script>
    //@ts-check
    /** Conexi√≥n al sistema de autenticaci√≥n de Firebase. */
    // @ts-ignore
    const auth = firebase.auth();
    /** Tipo de autenticaci√≥n de usuarios. En este caso es con Google. */
    // @ts-ignore
    const provider = new firebase.auth.GoogleAuthProvider();
    /* Configura el proveedor de Google para que permita seleccionar de una
     * lista. */
    provider.setCustomParameters({ prompt: "select_account" });
    /* Recibe una funci√≥n que se invoca cada que hay un cambio en la
     * autenticaci√≥n y recibe el modelo con las caracter√≠sticas del usuario.*/
    auth.onAuthStateChanged(
        /** Recibe las caracter√≠sticas del usuario o null si no ha iniciado
         * sesi√≥n. */
        usuarioAuth => {
            if (usuarioAuth && usuarioAuth.email) {
                // Usuario aceptado.
                // @ts-ignore Muestra el email registrado en Google.
                email.value = usuarioAuth.email;
                // @ts-ignore Muestra el nombre registrado en Google.
                nombre.value = usuarioAuth.displayName;
                // @ts-ignore Muestra el avatar registrado en Google.
                avatar.src = usuarioAuth.photoURL;
            } else {
                // No ha iniciado sesi√≥n. Pide datos para iniciar sesi√≥n.
                auth.signInWithRedirect(provider);
            }
        },
        // Funci√≥n que se invoca si hay un error al verificar el usuario.
        procesaError
    );
    /** Termina la sesi√≥n. */
    // Modifica la funci√≥n terminaSesi√≥n para que redireccione al index
    async function terminaSesi√≥n() {
        try {
            await auth.signOut();
            // Redirige al usuario al index (puedes cambiar la URL)
            window.location.href = "index.html"; // Cambia "index.html" a la URL de tu p√°gina de inicio
        } catch (e) {
            procesaError(e);
        }
    }

    /** Procesa un error. Muestra el objeto en la consola y un cuadro de
     * alerta con el mensaje.
     * @param {Error} e descripci√≥n del error. */
    function procesaError(e) {
        console.log(e);
        alert(e.message);
    }
</script>



<script>
    function checkLoginState() {
        FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
                // El usuario ha iniciado sesi√≥n con Facebook
                // Obtenemos informaci√≥n del usuario
                FB.api('/me', { fields: 'id,name,email,picture' }, function (userInfo) {
                    // Mostramos la informaci√≥n en la barra de navegaci√≥n
                    mostrarDatosEnBarraNavegacion(userInfo);
                    // Redirigir al usuario a sesion_F.html
                    window.location.href = 'sesion_F.html';
                });
            }
        });
    }

    // Funci√≥n para mostrar datos del usuario en la barra de navegaci√≥n
    function mostrarDatosEnBarraNavegacion(userInfo) {
        // Muestra el nombre en el campo "nombre"
        document.getElementById('nombre').textContent = userInfo.name;

        // Puedes mostrar el email si lo tienes disponible
        document.getElementById('email').textContent = userInfo.email;

        // Muestra la foto de perfil en el campo "avatar"
        document.getElementById('avatar').src = userInfo.picture.data.url;
    }

    window.fbAsyncInit = function () {
        FB.init({
            appId: '404253428797280', // Reemplaza con tu ID de aplicaci√≥n de Facebook
            cookie: true,
            xfbml: true,
            version: 'v18.0'
        });

        // Registra una funci√≥n de devoluci√≥n de llamada para manejar el cambio de estado de autenticaci√≥n
        FB.Event.subscribe('auth.statusChange', checkLoginState);
    };

    // Carga de manera as√≠ncrona el SDK de Facebook
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = 'https://connect.facebook.net/es_ES/sdk.js';
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

</html>