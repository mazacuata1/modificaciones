<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inicio de Sesión</title>
    <link rel="stylesheet" href="Estilos/styles_aut.css" />
    <link rel="icon" href="Imagenes/icono.png">
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js"></script>
    <script src="js/init.js"></script>
</head>

<body>

    <div class="login-container">
        <a href="index.html" class="back-button">⬅️ regresar</a> <!-- Nuevo botón para volver -->
        <br><br>
        <h2>¿Cómo desea iniciar sesión?</h2>
        <div class="button-container">
            <a href="sesion_G.html" class="social-button">
                <img src="Imagenes/google_logo.jpg" alt="Iniciar Sesión con Google" />
                Iniciar Sesión con Google
            </a>
        </div>
        <br>
        <center>
            <div id="spinner" style="
                background: #4267b2;
                border-radius: 5px;
                color: white;
                height: 40px;
                text-align: center;
                width: 250px;">
                Loading
                <br>
                <div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="continue_with"
                    data-use-continue-as="true"></div>
            </div>
        </center>
        <br><br><br><br><br><br>
    </div>




</body>
<script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/es_ES/sdk.js#xfbml=1&version=v18.0&appId=404253428797280"
    nonce="qgXHd83w"></script>


<script>
    var finished_rendering = function () {
        console.log("finished rendering plugins");
        var spinner = document.getElementById("spinner");
        spinner.removeAttribute("style");
        spinner.removeChild(spinner.childNodes[0]);
    }
    FB.Event.subscribe('xfbml.render', finished_rendering);
</script>


<script>
    const spinner = document.getElementById('spinner');
    const fbLoginButton = spinner.querySelector('.fb-login-button');

    fbLoginButton.addEventListener('click', e => {
        e.preventDefault();

        const provider = new firebase.auth.FacebookAuthProvider();

        auth.signInWithPopup(provider)
            .then(result => {
                console.log(result);
                console.log('Facebook sign in');

                // Redirigir al usuario a "sesion_F.html" después de iniciar sesión con éxito
                window.location.href = 'sesion_F.html';
            })
            .catch(err => {
                console.log(err);
            });
    });


</script>

</html>