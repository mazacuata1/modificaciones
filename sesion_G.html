<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cambios</title>
    <link rel="stylesheet" href="Estilos/styles.css" />
    <link rel="icon" href="Imagenes/icono.png" />
    <script src="js/init.js"></script>
    <script src="js/guardar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</head>

<body>
    <div class="navbar">
        <div class="navbar-left">
            <button type="button" onclick="terminaSesi√≥n()">Cerrar Sesi√≥n</button>
            <fieldset>
                <legend>Email</legend>
                <output id="email"><progress max="100">Cargando‚Ä¶</progress></output>
            </fieldset>
            <br />
            <fieldset>
                <legend>Nombre</legend>
                <output id="nombre"></output>
            </fieldset>
            <br />
        </div>
        <figure>
            <img src="avatar" id="avatar" alt="avatar" class="navbar-profile-image" />
        </figure>
    </div>

    <section class="profile-section">
        <h2 class="font-changeable">Cambia la foto de perfil</h2>
        <img src="" alt="avatar" class="profile-image" id="profile-preview" />
        <p class="font-changeable">Selecciona una imagen:</p>
        <select id="image-select">
            <option value="perfil2.png">Imagen 2</option>
            <option value="Perfil3.png">Imagen 3</option>
            <option value="Perfil4.png">Imagen 4</option>
            <option value="Perfil5.png">Imagen 5</option>
            <option value="Perfil6.png">Imagen 6</option>
            <option value="Perfil7.png">Imagen 7</option>
            <option value="Perfil8.png">Imagen 8</option>
            <option value="Perfil9.png">Imagen 9</option>
            <option value="Perfil10.png">Imagen 10</option>
            <option value="perfil11.png">Imagen 11</option>
            <option value="perfil12.png">Imagen 12</option>
            <option value="Perfil13.png">Imagen 13</option>
            <option value="Perfil14.png">Imagen 14</option>
            <option value="Perfil15.png">Imagen 15</option>
            <option value="Perfil16.png">Imagen 16</option>
            <option value="Perfil17.png">Imagen 17</option>
            <option value="Perfil18.png">Imagen 18</option>
            <option value="Perfil19.png">Imagen 19</option>
            <option value="Perfil20.png">Imagen 20</option>
            <option value="perfil21.png">Imagen 21</option>
            <option value="perfil22.png">Imagen 22</option>
            <option value="Perfil23.png">Imagen 23</option>
            <option value="Perfil24.png">Imagen 24</option>
            <option value="Perfil25.png">Imagen 25</option>
            <option value="Perfil26.png">Imagen 26</option>
            <option value="Perfil27.png">Imagen 27</option>
            <option value="Perfil28.png">Imagen 28</option>
            <option value="Perfil29.png">Imagen 29</option>
            <option value="Perfil30.png">Imagen 30</option>
            <option value="perfil31.png">Imagen 31</option>
            <option value="perfil32.png">Imagen 32</option>
            <option value="Perfil33.png">Imagen 33</option>
            <option value="Perfil34.png">Imagen 34</option>
            <option value="Perfil35.png">Imagen 35</option>
            <option value="Perfil36.png">Imagen 36</option>
            <option value="Perfil37.png">Imagen 37</option>
            <option value="Perfil38.png">Imagen 38</option>
            <option value="Perfil39.png">Imagen 39</option>
            <option value="Perfil40.png">Imagen 40</option>
            <option value="perfil41.png">Imagen 41</option>
            <option value="perfil42.png">Imagen 42</option>
            <option value="Perfil43.png">Imagen 43</option>
            <option value="Perfil44.png">Imagen 44</option>
        </select>
        <button id="cambiar-foto-button">Cambiar Foto</button>
        <p class="font-changeable">
            ¬øNo te gust√≥ ninguna foto? Selecciona una de tu galer√≠a üòé
        </p>
        <br />
        <input type="file" id="gallery-image" accept="image/*" />
        <br />
        <br />
        <br />
        <button id="reset-button">Restablecer Cambios</button>
        <br />
        <br />
    </section>

    <main class="color-change-section">
        <h2 class="font-changeable">
            Cambia los colores del encabezado y pie de p√°gina
        </h2>
        <br />
        <br />
        <p class="font-changeable">Selecciona un color:</p>
        <br />
        <input type="color" id="colorPicker" class="color-picker" />
        <br />
        <br />
        <br />
        <br />
        <button id="applyColor" class="apply-button">Aplicar Cambios</button>
        <button id="resetColor" class="reset-button">Restablecer Cambios</button>
    </main>

    <section class="font-change-section">
        <h2 class="font-changeable">Cambia la tipograf√≠a</h2>
        <p class="font-changeable" class="font-changeable">
            Selecciona una fuente:
        </p>
        <br />
        <select id="fontSelect" class="font-select">
            <option class="font-changeable" value="Arial, sans-serif">Arial</option>
            <option class="font-changeable" value="Georgia, serif">Georgia</option>
            <option class="font-changeable" value="Verdana, sans-serif">
                Verdana
            </option>
            <option class="font-changeable" value="Times New Roman, serif">
                Times New Roman
            </option>
            <option value="'KING ARTHUR', sans-serif">KING ARTHUR</option>
            <option value="'Minecraft', sans-serif">Minecraft</option>
        </select>
        <br />
        <button id="applyFont" class="apply-button">Aplicar Cambios</button>
        <button id="resetFont" class="reset-button">Restablecer Cambios</button>
    </section>

    <section class="background-section">
        <h2 class="font-changeable">Cambia el fondo</h2>
        <p class="font-changeable">Selecciona un color:</p>
        <input type="color" id="backgroundColorPicker" class="color-picker" />
        <br />
        <p class="font-changeable">Selecciona una imagen de fondo:</p>
        <input type="file" id="background-image" accept="image/*" />
        <br />
        <br />
        <button id="applyBackground" class="apply-button">Aplicar Cambios</button>
        <button id="resetBackground" class="reset-button">
            Restablecer Cambios
        </button>
    </section>

    <section class="image-gallery">
        <h2 class="font-changeable">Galer√≠a de Im√°genes</h2>
        <p class="font-changeable">Sube tus im√°genes y personaliza la galer√≠a:</p>
        <input type="file" id="image-upload" accept="image/*" />
        <br />
        <br />
        <button id="delete-all-button" class="custom-button delete-button">
            Eliminar Galer√≠a
        </button>
        <div class="image-grid">
            <!-- Im√°genes se mostrar√°n aqu√≠ -->
        </div>
    </section>

    <div class="section">
        <h2>Escribe en el coraz√≥n</h2>
        <div class="heart-container">
            <div class="heart"></div>
            <div class="heart-text">Tu texto aqu√≠</div>
        </div>
        <input type="text" id="text-input" placeholder="Escribe tu mensaje" onchange="updateHeartText()" />
        <br />
        <p>escribe lo que quieras üòò</p>
    </div>

    <center>
        <section class="background-section">
            <form id="cakeForm">
                <h2>Tortas</h2>

                <label for="cakeName">Nombre de la torta:</label>
                <input type="text" id="cakeName" name="cakeName" required />
                <br /><br />
                <label for="cakePrice">Precio:</label>
                <input type="text" id="cakePrice" name="cakePrice" required />
                <br /><br />

                <label for="purchaseDate">Fecha en que se compr√≥:</label>
                <input type="date" id="purchaseDate" name="purchaseDate" required />
                <br /><br /><br />

                <label for="cakeRating">Calificaci√≥n:</label>
                <input type="text" id="cakeRating" name="cakeRating" required />
                <br /><br />

                <label for="cakeSize">Tama√±o:</label>
                <input type="text" id="cakeSize" name="cakeSize" required />
                <br><br>

                <button type="submit">Guardar</button>
                <button type="button" id="viewDataBtn">Ver Datos Almacenados</button>
                <button type="button" id="modifyDataBtn">Modificar Datos</button>
                <button type="button" id="deleteDataBtn">Eliminar Datos</button>
            </form>

            <div id="storedData"></div>
        </section>

    </center>

    <br /><br /><br />

    <footer class="font-changeable">
        Copyright &copy; 2023 Saul Yair -- Mazacuata‰π°.
        <div class="social-icons">
            <a href="https://instagram.com/_mazacuata?utm_source=qr&igshid=NGExMmI2YTkyZg%3D%3D"><img
                    src="Imagenes/igLogo.png" alt="Instagram" /></a>
            <a href="https://github.com/mazacuata1"><img src="Imagenes/githubLogo.png" alt="GitHub" /></a>
            <a href="https://www.facebook.com/sauly.faick"><img src="Imagenes/fbLogo.png" alt="Facebook" /></a>
            <a href="https://replit.com/@yankee1234511"><img src="Imagenes/replitLogo.png" alt="Replit" /></a>
        </div>
    </footer>
</body>

<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>


<!-- Luego, incluye tu archivo init.js -->
<script src="js/init.js"></script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        const imageSelect = document.getElementById("image-select");
        const cambiarFotoButton = document.getElementById("cambiar-foto-button");
        const resetButton = document.getElementById("reset-button");
        const profileImage = document.getElementById("profile-preview");
        const navbarProfileImages = document.querySelectorAll(
            ".navbar-profile-image"
        );
        const galleryImageInput = document.getElementById("gallery-image");

        // Funci√≥n para restablecer la imagen a la inicial
        const resetImage = () => {
            profileImage.src = "avatar";
            navbarProfileImages.forEach((image) => {
                image.src = "avatar";
            });
            imageSelect.selectedIndex = 0; // Reiniciar el select a la primera opci√≥n
        };

        cambiarFotoButton.addEventListener("click", function () {
            const selectedImage = imageSelect.value;
            profileImage.src = `Perfiles/${selectedImage}`;

            // Cambiar tambi√©n la imagen en la barra de navegaci√≥n
            navbarProfileImages.forEach((image) => {
                image.src = `Perfiles/${selectedImage}`;
            });
        });

        resetButton.addEventListener("click", resetImage);

        // Actualizar la imagen de perfil en la secci√≥n al seleccionar una opci√≥n
        imageSelect.addEventListener("change", function () {
            const selectedImage = imageSelect.value;
            profileImage.src = `Perfiles/${selectedImage}`;
        });

        galleryImageInput.addEventListener("change", function (event) {
            const selectedImage = event.target.files[0];

            if (selectedImage) {
                profileImage.src = URL.createObjectURL(selectedImage);
                navbarProfileImages.forEach((image) => {
                    image.src = URL.createObjectURL(selectedImage);
                });
            }
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const colorPicker = document.getElementById("colorPicker");
        const applyButton = document.getElementById("applyColor");
        const resetButton = document.getElementById("resetColor");
        const header = document.querySelector(".navbar");
        const footer = document.querySelector("footer");

        let originalHeaderColor = getComputedStyle(header).backgroundColor;
        let originalFooterColor = getComputedStyle(footer).backgroundColor;

        applyButton.addEventListener("click", function () {
            const selectedColor = colorPicker.value;
            header.style.backgroundColor = selectedColor;
            footer.style.backgroundColor = selectedColor;
        });

        resetButton.addEventListener("click", function () {
            header.style.backgroundColor = originalHeaderColor;
            footer.style.backgroundColor = originalFooterColor;
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const fontSelect = document.getElementById("fontSelect");
        const applyFontButton = document.getElementById("applyFont");
        const resetFontButton = document.getElementById("resetFont");
        const elementsToChangeFont =
            document.querySelectorAll(".font-changeable");

        let originalFont = getComputedStyle(elementsToChangeFont[0]).fontFamily;

        applyFontButton.addEventListener("click", function () {
            const selectedFont = fontSelect.value;
            elementsToChangeFont.forEach((element) => {
                element.style.fontFamily = selectedFont;
            });
        });

        resetFontButton.addEventListener("click", function () {
            elementsToChangeFont.forEach((element) => {
                element.style.fontFamily = originalFont;
            });
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const backgroundColorPicker = document.getElementById(
            "backgroundColorPicker"
        );
        const backgroundImageInput = document.getElementById("background-image");
        const applyBackgroundButton = document.getElementById("applyBackground");
        const resetBackgroundButton = document.getElementById("resetBackground");
        const body = document.body;

        let originalBackgroundColor = getComputedStyle(body).backgroundColor;

        applyBackgroundButton.addEventListener("click", function () {
            const selectedBackgroundColor = backgroundColorPicker.value;
            body.style.backgroundColor = selectedBackgroundColor;
        });

        resetBackgroundButton.addEventListener("click", function () {
            body.style.backgroundColor = originalBackgroundColor;
        });

        backgroundImageInput.addEventListener("change", function (event) {
            const selectedImage = event.target.files[0];

            if (selectedImage) {
                body.style.backgroundImage = `url('${URL.createObjectURL(
                    selectedImage
                )}')`;
            }
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const imageUpload = document.getElementById("image-upload");
        const deleteAllButton = document.getElementById("delete-all-button");
        const imageGrid = document.querySelector(".image-grid");
        let pressTimer;

        // Funci√≥n para agregar una imagen a la galer√≠a
        const addImageToGallery = (imageSrc) => {
            const imgElement = document.createElement("img");
            imgElement.src = imageSrc;
            imgElement.alt = "Imagen de la galer√≠a";
            imgElement.className = "gallery-image";
            imageGrid.appendChild(imgElement);

            // Manejar clic en la imagen para mostrarla completa
            imgElement.addEventListener("click", function () {
                imgElement.classList.toggle("full-image");
            });

            // Manejar mantener presionada la imagen para eliminarla
            imgElement.addEventListener("mousedown", function () {
                pressTimer = setTimeout(function () {
                    imgElement.remove();
                }, 1000); // Esperar 1000 ms
            });

            imgElement.addEventListener("mouseup", function () {
                clearTimeout(pressTimer);
            });
        };

        // Manejar la carga de im√°genes desde el bot√≥n de carga
        imageUpload.addEventListener("change", function (event) {
            const selectedImage = event.target.files[0];
            if (selectedImage) {
                const imageURL = URL.createObjectURL(selectedImage);
                addImageToGallery(imageURL);
            }
        });

        // Manejar la eliminaci√≥n de todas las im√°genes
        deleteAllButton.addEventListener("click", function () {
            imageGrid.innerHTML = ""; // Vaciar la galer√≠a
        });
    });
</script>

<script>
    const heartText = document.querySelector(".heart-text");
    const colorButton = document.getElementById("color-button");
    const colorSelector = document.getElementById("color-selector");
    const resetButton = document.getElementById("reset-button");
    const heart = document.querySelector(".heart"); // Agregado

    document.addEventListener("click", () => {
        const color = colorSelector.value;
        heart.style.backgroundColor = color; // Modificado
    });

    resetButton.addEventListener("click", () => {
        heart.style.backgroundColor = "red"; // Modificado
    });

    function updateHeartText() {
        const textInput = document.getElementById("text-input");
        heartText.textContent = textInput.value;
    }
</script>

<script>
    //@ts-check
    /** Conexi√≥n al sistema de autenticaci√≥n de Firebase. */
    // @ts-ignore
    const auth = firebase.auth();
    /** Tipo de autenticaci√≥n de usuarios. En este caso es con Google. */
    // @ts-ignore
    const provider = new firebase.auth.GoogleAuthProvider();
    /* Configura el proveedor de Google para que permita seleccionar de una
     * lista. */
    provider.setCustomParameters({ prompt: "select_account" });
    /* Recibe una funci√≥n que se invoca cada que hay un cambio en la
     * autenticaci√≥n y recibe el modelo con las caracter√≠sticas del usuario.*/
    auth.onAuthStateChanged(
        /** Recibe las caracter√≠sticas del usuario o null si no ha iniciado
         * sesi√≥n. */
        usuarioAuth => {
            if (usuarioAuth && usuarioAuth.email) {
                // Usuario aceptado.
                // @ts-ignore Muestra el email registrado en Google.
                email.value = usuarioAuth.email;
                // @ts-ignore Muestra el nombre registrado en Google.
                nombre.value = usuarioAuth.displayName;
                // @ts-ignore Muestra el avatar registrado en Google.
                avatar.src = usuarioAuth.photoURL;
            } else {
                // No ha iniciado sesi√≥n. Pide datos para iniciar sesi√≥n.
                auth.signInWithRedirect(provider);
            }
        },
        // Funci√≥n que se invoca si hay un error al verificar el usuario.
        procesaError
    );
    /** Termina la sesi√≥n. */
    async function terminaSesi√≥n() {
        try {
            await auth.signOut();
        } catch (e) {
            procesaError(e);
        }
    }
    /** Procesa un error. Muestra el objeto en la consola y un cuadro de
     * alerta con el mensaje.
     * @param {Error} e descripci√≥n del error. */
    function procesaError(e) {
        console.log(e);
        alert(e.message);
    }
</script>
<script>
    auth.onAuthStateChanged(
        usuarioAuth => {
            if (usuarioAuth && usuarioAuth.email) {
                // ... (otros elementos) ...

                // Mostrar la imagen y el texto una vez autenticado
                document.getElementById("foryuFigure").style.display = "block";
                document.getElementById("imageCaption").style.display = "block";
            } else {
                // ... (otros elementos) ...
            }
        },
        procesaError
    );
</script>


<script>
    document.getElementById('cakeForm').addEventListener('submit', function (e) {
        e.preventDefault();

        // Obtener los valores del formulario
        var cakeName = document.getElementById('cakeName').value;
        var cakePrice = document.getElementById('cakePrice').value;
        var purchaseDate = document.getElementById('purchaseDate').value;
        var cakeRating = document.getElementById('cakeRating').value;
        var cakeSize = document.getElementById('cakeSize').value;

        // Crear un objeto con los datos
        var cakeData = {
            'Nombre de la torta': cakeName,
            'Precio': cakePrice,
            'Fecha en que se compr√≥': purchaseDate,
            'Calificaci√≥n': cakeRating,
            'Tama√±o': cakeSize
        };

        // Verificar si hay datos almacenados previamente
        var storedCakeData = JSON.parse(localStorage.getItem('cakeData'));

        if (storedCakeData) {
            // Si hay datos almacenados, preguntar al usuario si desea modificarlos
            Swal.fire({
                icon: 'question',
                title: 'Modificar Datos',
                text: '¬øDeseas modificar los datos almacenados?',
                showCancelButton: true,
                confirmButtonText: 'S√≠',
                cancelButtonText: 'No'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Actualizar los datos existentes con los nuevos valores
                    Object.assign(storedCakeData, cakeData);
                    localStorage.setItem('cakeData', JSON.stringify(storedCakeData));

                    Swal.fire({
                        icon: 'success',
                        title: 'Datos Modificados',
                        text: 'Los datos se han modificado correctamente.'
                    });
                }
            });
        } else {
            // Si no hay datos almacenados, guardar los nuevos datos
            localStorage.setItem('cakeData', JSON.stringify(cakeData));

            Swal.fire({
                icon: 'success',
                title: '¬°Tortas guardadas con √©xito!',
                text: 'La informaci√≥n se ha registrado correctamente.'
            });
        }

        // Limpiar el formulario
        document.getElementById('cakeForm').reset();
    });

    // Bot√≥n para ver datos
    document.getElementById('viewDataBtn').addEventListener('click', function () {
        // Redirigir a la p√°gina "tortas.html"
        window.location.href = 'tortas.html';
    });

    // Funci√≥n para cargar los datos almacenados en el formulario para su modificaci√≥n
    document.getElementById('modifyDataBtn').addEventListener('click', function () {
        var storedCakeData = JSON.parse(localStorage.getItem('cakeData'));

        if (storedCakeData) {
            // Llenar el formulario con los datos almacenados para su modificaci√≥n
            document.getElementById('cakeName').value = storedCakeData['Nombre de la torta'];
            document.getElementById('cakePrice').value = storedCakeData['Precio'];
            document.getElementById('purchaseDate').value = storedCakeData['Fecha en que se compr√≥'];
            document.getElementById('cakeRating').value = storedCakeData['Calificaci√≥n'];
            document.getElementById('cakeSize').value = storedCakeData['Tama√±o'];

            Swal.fire({
                icon: 'info',
                title: 'Modificaci√≥n',
                text: 'Puedes modificar los datos en el formulario. Despu√©s, haz clic en "Guardar".'
            });
        } else {
            Swal.fire({
                icon: 'warning',
                title: 'Sin Datos',
                text: 'No hay datos almacenados para modificar.'
            });
        }
    });

    // Funci√≥n para eliminar datos
    document.getElementById('deleteDataBtn').addEventListener('click', function () {
        // Elimina la entrada 'cakeData' del Local Storage
        localStorage.removeItem('cakeData');

        Swal.fire({
            icon: 'success',
            title: 'Datos Eliminados',
            text: 'Los datos se han eliminado correctamente.'
        });
    });


</script>



</html>